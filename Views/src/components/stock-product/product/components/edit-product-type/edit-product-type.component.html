<div class="border-around" *ngIf="productsTypes$">
    <title-component [digit]="'|'" [titleString]="'Tipo de produto'" [icon]="'storage'">
    </title-component>
    <mat-card class="small-large-screen">
        <sub-title title [title]="'Cadastro'" [icon]="'add'"></sub-title>
        <mat-radio-group class="container" #selectedRadio (change)="radioChange($event)" [value]="'product-type'"
            aria-label="selecione uma opcao">
            <div class="product-type">
                <mat-radio-button class="type-radio" [value]="'product-type'">
                    <ng-container *ngIf="entityToEdit == 'type'; else elseBlock">
                        <h3>Tipo de produto</h3>
                    </ng-container>
                    <ng-template #elseBlock>
                        Tipo de produto
                    </ng-template>
                </mat-radio-button>
                <div [class]="{'array-hide': entityToEdit != 'type'}">
                    <array-g [formMain]="productTypeForm" [arrayName]="'productsTypes'" [formArray]="productsTypes"
                        [labelInput]="'Tipo de produto'">

                        <btn-g add btn-1 *ngIf="entityToEdit == 'type'" [name]="'Adicionar'" [icon]="'add'"
                            (btn)="addAddItemArray('type')"></btn-g>
                    </array-g>
                </div>
            </div>

            <div
                [class]="{'btn-save-show': entityToEdit == 'type' && productsTypes$, 'btn-save-hide': entityToEdit != 'type'}">
                <btn-g [name]="'Salvar'" [icon]="'save'" (btn)="saveArray(productsTypes)"></btn-g>
            </div>


            <div class="segment">
                <mat-radio-button class="segment-radio" value="segment">
                    <ng-container *ngIf="entityToEdit == 'segment'; else elseSegmentBlock">
                        <h3>Segmento</h3>
                    </ng-container>
                    <ng-template #elseSegmentBlock>
                        Segmento
                    </ng-template>
                </mat-radio-button>
                <div *ngIf="entityToEdit == 'segment'">

                    <field-select-g [formControlReset]="controlReset" (outEntitiesSelected)="onSelectedProduct($event)" [entities]="productsTypes$"
                        [labelInput]="'Tipo'"></field-select-g>

                    <array-g [formMain]="formMain" [arrayName]="'segments'" [formArray]="segments"
                        [labelInput]="'Segmento'">
                        <btn-g add btn-1 *ngIf="entityToEdit == 'segment' && segments$" [name]="'Adicionar'"
                            [icon]="'add'" (btn)="addAddItemArray('segment')"></btn-g>
                    </array-g>
                </div>
            </div>

            <div
                [class]="{'btn-save-show': entityToEdit == 'segment' && segments, 'btn-save-hide': entityToEdit != 'segment' || (segments.length < 1)}">
                <btn-g [name]="'Salvar'" [icon]="'save'" (click)="saveSingle()"></btn-g>
            </div>

            <div class="manufacturer">
                <mat-radio-button class="manufacturer-radio" value="manufacturer">
                    <ng-container *ngIf="entityToEdit == 'manufacturer'; else elseManufacturerBlock">
                        <h3>Fabricante</h3>
                    </ng-container>
                    <ng-template #elseManufacturerBlock>
                        Fabricante
                    </ng-template>
                </mat-radio-button>

                <div [class]="{'array-hide': entityToEdit != 'manufacturer'}">

                    <field-select-g [formControlReset]="controlReset" (outEntitiesSelected)="onSelectedProduct($event)" [entities]="productsTypes$"
                        [labelInput]="'Tipo'">
                    </field-select-g>
                    <field-select-g [formControlReset]="controlReset" (outEntitiesSelected)="onSelectedSegment($event)" [entities]="segments$"
                        [labelInput]="'Segmento'">
                    </field-select-g>

                    <array-g [formMain]="segmentForm" [arrayName]="'manufacturers'" [formArray]="manufacturers"
                        [labelInput]="'Fabricante'">
                        <btn-g add btn-1 *ngIf="entityToEdit == 'manufacturer' && manufacturers$" [name]="'Adicionar'"
                            [icon]="'add'" (btn)="addAddItemArray('manufacturer')"></btn-g>
                    </array-g>

                </div>

            </div>

            <div
                [class]="{'btn-save-show': entityToEdit == 'manufacturer' && manufacturers, 'btn-save-hide': entityToEdit != 'manufacturer' || (manufacturers.length < 1)}">
                <btn-g [name]="'Salvar'" [icon]="'save'" (click)="saveSingle()"></btn-g>
            </div>


            <div class="model">
                <mat-radio-button class="model-radio" value="model">
                    <ng-container *ngIf="entityToEdit == 'model'; else elseModelBlock">
                        <h3>Modelo</h3>
                    </ng-container>
                    <ng-template #elseModelBlock>
                        Modelo
                    </ng-template>
                </mat-radio-button>
                <div [class]="{'array-hide': entityToEdit != 'model'}">

                    <field-select-g  (outEntitiesSelected)="onSelectedProduct($event)" [entities]="productsTypes$"
                        [labelInput]="'Tipo'">
                    </field-select-g>
                    <field-select-g  (outEntitiesSelected)="onSelectedSegment($event)" [entities]="segments$"
                        [labelInput]="'Segmento'">
                    </field-select-g>
                    <field-select-g  (outEntitiesSelected)="onSelectedManufacturer($event)" [entities]="manufacturers$"
                        [labelInput]="'Fabricante'">
                    </field-select-g>
                    <!-- <field-select-g [formControlReset]="controlReset" (outEntitiesSelected)="onSelectedProduct($event)" [entities]="productsTypes$"
                        [labelInput]="'Tipo'">
                    </field-select-g>
                    <field-select-g [formControlReset]="controlReset" (outEntitiesSelected)="onSelectedSegment($event)" [entities]="segments$"
                        [labelInput]="'Segmento'">
                    </field-select-g>
                    <field-select-g [formControlReset]="controlReset" (outEntitiesSelected)="onSelectedManufacturer($event)" [entities]="manufacturers$"
                        [labelInput]="'Fabricante'">
                    </field-select-g> -->

                    <array-g [formMain]="manufacturerForm" [arrayName]="'models'" [formArray]="models"
                        [labelInput]="'Modelo'" [entityToEdit]="entityToEdit"> <btn-g add btn-1
                            *ngIf="entityToEdit == 'model' && models$" [name]="'Adicionar'" [icon]="'add'"
                            (btn)="addAddItemArray('model')"></btn-g>
                    </array-g>

                </div>
            </div>

            <div [class]="{'btn-save-show': entityToEdit == 'model' && models}">
                <btn-g *ngIf="entityToEdit == 'model' && models$" [name]="'Salvar'" [icon]="'save'"
                    (click)="saveSingle()"></btn-g>
            </div>


        </mat-radio-group>
    </mat-card>
</div>