<div style="padding:100px;">
    <h3>
        Conta Bancaria
    </h3>
    <hr>
    <div [formGroup]="formMain" fxLayout="column">

        <br>
        <mat-card-title>Identificação</mat-card-title>
        <mat-card>
            <div fxLayout="row" fxLayoutGap="30px">
                <mat-form-field fxFlex="50%">
                    <mat-label>Titular</mat-label>
                    <input matInput type="text" formControlName="holder">
                </mat-form-field>

                <mat-form-field fxFlex="50%">
                    <mat-label>Instituição Financeira</mat-label>
                    <input matInput type="text" formControlName="institution">
                </mat-form-field>
            </div>
        </mat-card>






        <br>
        <mat-card-title>Dados Bancários</mat-card-title>
        <mat-card>
            <div fxLayout="row" fxLayoutGap="30px">
                <mat-form-field fxFlex="40%">
                    <mat-label>Agência</mat-label>
                    <input matInput type="text" formControlName="agency">
                </mat-form-field>


                <mat-form-field fxFlex="40%">
                    <mat-label>Conta</mat-label>
                    <input matInput type="text" formControlName="account">
                </mat-form-field>

                <mat-form-field fxFlex="40%">
                    <mat-label>Tipo de Conta</mat-label>
                    <input matInput type="text" formControlName="typeaccount">
                </mat-form-field>
            </div>
        </mat-card>



        <br>
        <mat-card-title>Contato</mat-card-title>
        <mat-card>
            <div fxLayout="row" fxLayoutGap="30px">
                <mat-form-field fxFlex="50%">
                    <mat-label>Gerente</mat-label>
                    <input matInput type="text">
                </mat-form-field>
                <mat-form-field fxFlex="50%">
                    <mat-label>Contato Gerente</mat-label>
                    <input matInput type="text" formControlName="manager">
                </mat-form-field>
            </div>
        </mat-card>


        <br>
        <mat-card-title>PIX</mat-card-title>
        <mat-card>
            <div fxLayout="row" fxLayoutGap="30px">
                <mat-form-field fxFlex="50%">
                    <mat-label>PIX</mat-label>
                    <mat-select [(value)]="defaultSelected" #pix>

                        <mat-option [value]="p.kindPix" *ngFor="let p of pixArray">{{p.kindPix}}</mat-option>
                        <!-- <mat-option value="email">E-Mail</mat-option>
                    <mat-option value="cpf">CPF</mat-option>
                    <mat-option value="cnpj">CNPJ</mat-option> -->
                    </mat-select>
                </mat-form-field>

                <mat-form-field fxFlex="50%" *ngIf="pix.value == 'CEL'">
                    <mat-label>Cel</mat-label>
                    <input matInput type="text" mask="(00) 0-0000-0000" placeholder="Ex: (00) 0-0000-0000" formControlName="pix">
                </mat-form-field>
                <mat-form-field fxFlex="50%" *ngIf="pix.value == 'E-MAIL'">
                    <mat-label>E-Mail</mat-label>
                    <input matInput type="text" formControlName="pix">
                </mat-form-field>
                <mat-form-field fxFlex="50%" *ngIf="pix.value == 'CPF'">
                    <mat-label>CPF</mat-label>
                    <input matInput type="text" mask="CPF_CNPJ" formControlName="pix">
                </mat-form-field>
                <mat-form-field fxFlex="50%" *ngIf="pix.value == 'CNPJ'">
                    <mat-label>CNPJ</mat-label>
                    <input matInput type="text" mask="CPF_CNPJ" formControlName="pix">
                </mat-form-field>

            </div>
        </mat-card>
        <br>
        <mat-card-title>Valores</mat-card-title>

        <mat-card>
            <mat-label>Saldo</mat-label>
            <input style="width:50%; font-size: 35px;" matInput type="text" currencyMask formControlName="balance">
        </mat-card>
        <br>
        <mat-card-title>Observações</mat-card-title>
        <mat-card fxFlex="100%">
            <div fxLayout="row" fxLayoutGap="30px">
                <div fxLayout="row" fxFlex="100%">
                    <mat-form-field fxFlex="100%">
                        <mat-label>Descrição</mat-label>
                        <input matInput type="text" formControlName="description">
                    </mat-form-field>
                </div>
            </div>
        </mat-card>



        <table>
            <br>
            <br>
            <br>
            <tr>
                <mat-card>
                    <div fxLayoutAlign="center center" fxLayout="row" fxLayoutGap="30px" fxFlex="100%">
                        <h3>ADICIONAR CARTÕES</h3>
                    </div>
                </mat-card>
            </tr>
            <br>

            <tr>
                <td fxFlex="100%" fxLayoutAlign="end start">
                    <button mat-raised-button color="primary" (click)="addCard()" style="margin-right: 15px; width: 250px;">Adicionar</button>
                </td>
            </tr>
        </table>


        <div class="m-3" id="generalDiv">
            <hr>
            <div formArrayName="cards" *ngFor="let ctrls of getCards.controls let i = index">
                <table>
                    <tr fxFlex="100%">
                        <td fxFlex="100%">
                            <h3>
                                {{'Cartão '+(1+i) }}
                            </h3>

                        </td>
                        <td fxFlex="100%" fxLayoutAlign="end end">

                            <button mat-raised-button style="background-color:red; color:white;" (click)="removeCard($event.target)">Remover</button>

                        </td>
                    </tr>
                </table>

                <div [formGroupName]="i" fxLayout="column">
                    <mat-card-title>Identificação</mat-card-title>
                    <mat-card>
                        <div fxLayout="row" fxLayoutGap="30px">
                            <mat-form-field fxFlex="100%">
                                <mat-label>Nome</mat-label>
                                <input matInput type="text" formControlName="holder" placeholder="Nome exatamente como está no cartão.">
                            </mat-form-field>
                        </div>
                    </mat-card>
                    <br>
                    <!-- <mat-card-title>Identificação</mat-card-title> -->
                    <mat-card>

                        <br>
                        <mat-card-title>Dados Bancários</mat-card-title>
                        <mat-card>
                            <div fxLayout="row" fxLayoutGap="30px">

                                <mat-form-field fxFlex="50%">
                                    <mat-label>Bandeira</mat-label>
                                    <input matInput type="text" formControlName="flag">
                                </mat-form-field>
                                <mat-form-field fxFlex="50%">
                                    <mat-label>Tipo</mat-label>
                                    <mat-select formControlName="typeaccount">
                                        <mat-option value="credit">Crédito</mat-option>
                                        <mat-option value="debit">Débito</mat-option>
                                        <mat-option value="creditDebit">Crédito e Débito</mat-option>
                                    </mat-select>
                                </mat-form-field>


                            </div>

                        </mat-card>
                        <br>

                        <mat-card>
                            <div fxLayout="row" fxLayoutGap="30px">


                                <mat-form-field fxFlex="40%">
                                    <mat-label>Número Do Cartão</mat-label>
                                    <input matInput type="text" formControlName="numbercard">
                                </mat-form-field>



                                <mat-form-field fxFlex="40%">
                                    <mat-label>Código Verificador</mat-label>
                                    <input matInput type="text" formControlName="checkcode">
                                </mat-form-field>

                                <mat-form-field fxFlex="40%">
                                    <mat-label>Mês e Ano</mat-label>
                                    <input matInput [matDatepicker]="dp" formControlName="validate">
                                    <!-- [(ngModel)]="getDate" -->
                                    <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                                    <mat-datepicker #dp startView="multi-year" panelClass="example-month-picker">
                                        <!-- (monthSelected)="setMonthAndYear($event, dp)" -->
                                    </mat-datepicker>
                                </mat-form-field>
                            </div>
                        </mat-card>

                        <br>
                        <mat-card-title>Valores</mat-card-title>

                        <mat-card>
                            <mat-label>Limite Credito</mat-label>
                            <input style="width:50%; font-size: 35px;" matInput type="text" currencyMask formControlName="limit">
                        </mat-card>
                        <br>

                        <br>
                        <mat-card>
                            <div fxLayout="row">
                                <mat-form-field fxFlex="100%">
                                    <mat-label>Observações</mat-label>
                                    <input matInput type="text" formControlName="description">
                                </mat-form-field>
                            </div>
                        </mat-card>
                    </mat-card>
                    <br>
                    <mat-divider>
                    </mat-divider>
                    <br>
                </div>
            </div>

        </div>


    </div>
    <div fxLayout="row" fxLayoutAlign="center center">
        <button style="margin-right: 15px; width: 550px; height: 50px; font-size: 30px;" mat-raised-button color="primary" type="submit" (click)="save()">Salvar</button>
    </div>
