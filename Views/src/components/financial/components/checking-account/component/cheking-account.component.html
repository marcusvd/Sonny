<!-- <mat-divider class="mat-elevation-z8"></mat-divider> -->
<div style="padding:10px;">
    <br>
    <div [formGroup]="formMain" fxLayout="column">
        <mat-card-title>Identificação</mat-card-title>
        <mat-card>
            <mat-grid-list (window:resize)="screen()" [cols]="holderInstitutionCols" [rowHeight]="holderInstitutionRowHeight">
                <mat-grid-tile>
                    <mat-form-field fxFlex="99">
                        <mat-label>Titular</mat-label>
                        <input matInput type="text" formControlName="holder">
                        <mat-error>
                            <span>{{validatorMessages.required(formMain,'holder', 'Titular')}}</span>
                            <span>{{validatorMessages.minMaxLength(formMain,'holder', 'Titular',null,100)}}</span>
                        </mat-error>
                    </mat-form-field>
                </mat-grid-tile>
                <mat-grid-tile>
                    <mat-form-field fxFlex="99">
                        <mat-label>Instituição Financeira</mat-label>
                        <input matInput type="text" formControlName="institution">
                        <mat-error>
                            <span>{{validatorMessages.required(formMain,'institution', 'Instituição financeira')}}</span>
                            <span>{{validatorMessages.minMaxLength(formMain,'institution', 'Instituição financeira',null,100)}}</span>
                        </mat-error>
                    </mat-form-field>
                </mat-grid-tile>
            </mat-grid-list>
        </mat-card>
        <br>
        <mat-card-title>Dados Bancários</mat-card-title>
        <mat-card>
            <mat-grid-list (window:resize)="screen()" [cols]="agencyAccountTypeaccountCols" [rowHeight]="agencyAccountTypeaccountRowHeight">
                <mat-grid-tile>
                    <mat-form-field fxFlex="99">
                        <mat-label>Agência</mat-label>
                        <input matInput type="text" formControlName="agency">
                        <mat-error>
                            <span>{{validatorMessages.required(formMain,'agency', 'Agência')}}</span>
                            <span>{{validatorMessages.minMaxLength(formMain,'agency', 'Agência',null,10)}}</span>
                        </mat-error>
                    </mat-form-field>
                </mat-grid-tile>
                <mat-grid-tile>
                    <mat-form-field fxFlex="99">
                        <mat-label>Conta</mat-label>
                        <input matInput type="text" formControlName="account">
                        <mat-error>
                            <span>{{validatorMessages.required(formMain,'account', 'Conta')}}</span>
                            <span>{{validatorMessages.minMaxLength(formMain,'account', 'Conta',null,10)}}</span>
                        </mat-error>
                    </mat-form-field>
                </mat-grid-tile>
                <mat-grid-tile>
                    <mat-form-field id="mat-select-padding" fxFlex="99">
                        <mat-label>Tipo de Conta</mat-label>
                        <mat-select formControlName="typeaccount">
                            <mat-option [value]="typesAccount.typeAccount" *ngFor="let typesAccount of typeAccountsArray">
                                {{typesAccount.typeAccount}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </mat-grid-tile>
            </mat-grid-list>
        </mat-card>

        <br>
        <mat-card-title>Contato</mat-card-title>
        <mat-card>

            <mat-grid-list (window:resize)="screen()" [cols]="textCols" [rowHeight]="managerRowHeight">
                <mat-grid-tile>
                    <mat-form-field fxFlex="99">
                        <mat-label>Gerente Nome</mat-label>
                        <input formControlName="manager" matInput type="text">
                        <mat-error>
                            <span>{{validatorMessages.minMaxLength(formMain,'manager', 'Gerente',null,100)}}</span>
                        </mat-error>
                    </mat-form-field>
                </mat-grid-tile>

                <mat-grid-tile>
                    <mat-form-field fxFlex="99">
                        <mat-label>Contato Gerente</mat-label>
                        <input matInput type="text" formControlName="managerContact">
                        <mat-error>
                            <span>{{validatorMessages.minMaxLength(formMain,'manager', 'Gerente',null,100)}}</span>
                        </mat-error>
                    </mat-form-field>
                </mat-grid-tile>

            </mat-grid-list>


        </mat-card>


        <br>
        <mat-card-title>PIX</mat-card-title>
        <mat-card>
            <mat-grid-list (window:resize)="screen()" [cols]="pixCols" [rowHeight]="pixRowHeight">
                <mat-grid-tile>
                    <mat-form-field id="mat-select-padding" fxFlex="99">
                        <mat-label>PIX</mat-label>
                        <mat-select formControlName="pix" #pix>
                            <mat-option [value]="p.kindPix" *ngFor="let p of pixArray">{{p.kindPix}}</mat-option>
                        </mat-select>
                    </mat-form-field>

                </mat-grid-tile>

                <mat-grid-tile>

                    <mat-form-field fxFlex="99" *ngIf="pix.value == 'CEL'">
                        <mat-label>Cel</mat-label>
                        <input matInput type="text" mask="00 0-0000-0000" placeholder="Ex: (00) 0-0000-0000" formControlName="pix">
                    </mat-form-field>
                    <mat-form-field fxFlex="99" *ngIf="pix.value == 'E-MAIL'">
                        <mat-label>E-Mail</mat-label>
                        <input matInput type="text" formControlName="pix">
                    </mat-form-field>
                    <mat-form-field fxFlex="99" *ngIf="pix.value == 'CPF'">
                        <mat-label>CPF</mat-label>
                        <input matInput type="text" mask="CPF_CNPJ" formControlName="pix">
                    </mat-form-field>
                    <mat-form-field fxFlex="99" *ngIf="pix.value == 'CNPJ'">
                        <mat-label>CNPJ</mat-label>
                        <input matInput type="text" mask="CPF_CNPJ" formControlName="pix">
                    </mat-form-field>

                </mat-grid-tile>
            </mat-grid-list>
        </mat-card>
        <br>
        <mat-card-title>Valores</mat-card-title>

        <mat-card>
            <mat-form-field fxFlex="99">
                <mat-label>Saldo
                </mat-label>
                <input style="font-size: 35px;" matInput type="text" currencyMask formControlName="balance">
            </mat-form-field>
        </mat-card>
        <br>
        <mat-card-title>Observações</mat-card-title>
        <mat-card fxFlex="100%">
            <div fxLayout="row" fxLayoutGap="30px">
                <div fxLayout="row" fxFlex="100%">
                    <mat-form-field fxFlex="100%">
                        <mat-label>Descrição</mat-label>
                        <input matInput type="text" formControlName="description">
                        <mat-error>
                            <span>{{validatorMessages.minMaxLength(formMain,'description', 'Descrição',null,100)}}</span>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
        </mat-card>



        <table>
            <br>
            <br>
            <br>
            <tr>
                <mat-card>
                    <div fxLayoutAlign="center center" fxLayout="row" fxLayoutGap="30px" fxFlex="100%">
                        <h3>ADICIONAR CARTÕES</h3>
                    </div>
                </mat-card>
            </tr>
            <br>

            <tr>
                <td fxFlex="100%" fxLayoutAlign="end start">
                    <button id="btnAdd" mat-raised-button color="primary" (click)="addCard()">Adicionar</button>
                </td>
            </tr>
        </table>


        <div class="m-3" id="generalDiv">
            <hr>
            <div formArrayName="cards" *ngFor="let ctrls of getCards.controls let i = index">

                <mat-card>
                    <mat-grid-list [cols]="cardsRemoveCols" [rowHeight]="cardsRemoveRowHeight">

                        <mat-grid-tile fxFlex="100%">
                            <mat-card>
                                <h3>
                                    {{'Cartão '+(1+i) }}
                                </h3>
                            </mat-card>
                        </mat-grid-tile>

                        <mat-grid-tile fxFlex="100%" fxLayoutAlign="center center">
                            <button mat-raised-button style="background-color:red; color:white;" (click)="removeCard($event.target)">Remover</button>
                        </mat-grid-tile>
                    </mat-grid-list>
                </mat-card>

                <div [formGroupName]="i" fxLayout="column">
                    <br>
                    <mat-card>
                        <mat-card-title>Identificação</mat-card-title>
                        <mat-card>
                            <mat-form-field fxFlex="100%">
                                <mat-label>Nome</mat-label>
                                <input matInput type="text" formControlName="holder" placeholder="Nome exatamente como está no cartão.">
                                <mat-error>
                                    <span>{{validatorMessages.required(formMain,'holder', 'Titular')}}</span>
                                    <span>{{validatorMessages.minMaxLength(formMain,'holder', 'Titular',null,100)}}</span>
                                </mat-error>
                            </mat-form-field>
                        </mat-card>
                        <br>
                        <mat-card-title>Dados do cartão</mat-card-title>
                        <mat-card>
                            <mat-grid-list (window:resize)="screen()" [cols]="flagTypeaccountCols" [rowHeight]="flagTypeaccountRowHeight">
                                <mat-grid-tile>
                                    <mat-form-field fxFlex="99">
                                        <mat-label>Bandeira</mat-label>
                                        <input matInput type="text" formControlName="flag">
                                        <mat-error>
                                            <span>{{validatorMessages.required(subForm,'flag', 'Bandeira')}}</span>
                                            <span>{{validatorMessages.minMaxLength(subForm,'flag', 'Bandeira',null,50)}}</span>
                                        </mat-error>
                                    </mat-form-field>
                                </mat-grid-tile>
                                <mat-grid-tile>
                                    <mat-form-field id="mat-select-padding" fxFlex="99">
                                        <mat-label>Tipo</mat-label>
                                        <mat-select formControlName="typeCard" (selectionChange)="validatorCustom.selectvalidator(subForm, $event.value, '!=', 'débito', {required:true}, ['numberCard','checkCode','validate','limit','flag'])">
                                            <mat-option [value]="card.typeCard" *ngFor="let card of typeCardArray">{{card.typeCard}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>

                        </mat-card>
                        <br>

                        <mat-card>
                            <mat-grid-list (window:resize)="screen()" [cols]="numbercardCheckcodeValidateCols" [rowHeight]="numbercardCheckcodeValidateRowHeight">
                                <mat-grid-tile>
                                    <mat-form-field fxFlex="99">
                                        <mat-label>Número</mat-label>
                                        <input matInput type="text" formControlName="numberCard">
                                        <mat-error>
                                            <span>{{validatorMessages.required(subForm,'numberCard', 'Número do cartão')}}</span>
                                            <span>{{validatorMessages.minMaxLength(subForm,'numberCard', 'Número do cartão',13,20)}}</span>
                                        </mat-error>
                                        <!--  -->
                                    </mat-form-field>
                                </mat-grid-tile>

                                <mat-grid-tile>
                                    <mat-form-field fxFlex="99">
                                        <mat-label>Código Verificador</mat-label>
                                        <input matInput type="text" formControlName="checkCode">
                                        <mat-error>
                                            <span>{{validatorMessages.required(subForm,'checkCode', 'Código verificador')}}</span>
                                            <span>{{validatorMessages.minMaxLength(subForm,'checkCode', 'Código verificador',null,10)}}</span>
                                        </mat-error>
                                    </mat-form-field>
                                </mat-grid-tile>

                                <mat-grid-tile>
                                    <mat-form-field fxFlex="99">
                                        <mat-label>Mês e Ano</mat-label>
                                        <input matInput [matDatepicker]="dp" formControlName="validate">
                                        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                                        <mat-datepicker #dp startView="multi-year" panelClass="example-month-picker">
                                        </mat-datepicker>
                                        <mat-error>
                                            <span>{{validatorMessages.required(subForm,'validate', 'Validade')}}</span>
                                        </mat-error>
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>

                        </mat-card>

                        <br>
                        <mat-card-title>Valores</mat-card-title>

                        <mat-card>
                            <mat-form-field fxFlex="100%">
                                <mat-label>Limite Credito</mat-label>
                                <input matInput type="text" currencyMask formControlName="limit">
                                <mat-error>
                                    <span>{{validatorMessages.required(subForm,'limit', 'Limite credito')}}</span>
                                </mat-error>
                            </mat-form-field>
                        </mat-card>
                        <br>

                        <br>
                        <mat-card>
                            <div fxLayout="row">
                                <mat-form-field fxFlex="100%">
                                    <mat-label>Observações</mat-label>
                                    <input matInput type="text" formControlName="description">
                                </mat-form-field>
                            </div>
                        </mat-card>
                    </mat-card>
                    <br>
                    <mat-divider>
                    </mat-divider>
                    <br>
                </div>
            </div>

        </div>


    </div>
    <div fxLayout="row" fxLayoutAlign="center center">
        <button id="btnSave" mat-raised-button color="primary" type="submit" (click)="save()">Salvar</button>
    </div>
</div>
